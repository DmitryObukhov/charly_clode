# Charly Neuromorphic Simulation Configuration
# =============================================

# Random Seed (for reproducibility)
SEED: 42

# =============================================================================
# Neural Substrate Parameters
# =============================================================================

# Neuron counts
NEURON_COUNT: 5000           # Total neurons in substrate
HEAD_COUNT: 1000             # Sensory region (indices 0 to HEAD_COUNT-1)
BODY_COUNT: 3000             # Integration region (indices HEAD_COUNT to HEAD_COUNT+BODY_COUNT-1)
TAIL_COUNT: 1000             # Motor/output region start index

# Charge dynamics
CHARGE_MIN: 100             # Minimum charge required for neuron to fire
RECHARGE_RATE: 10           # Base charge accumulation per iteration
NORMAL_TRIGGER: 100         # Threshold for cumulative signal activation
DEFAULT_CUMULATIVE_INPUT: 2000  # Total synapse weight per neuron

# Elastic parameters
ELASTIC_TRIGGER_PROPAGATION: 0.75
ELASTIC_TRIGGER_DEGRADATION: 1
ELASTIC_RECHARGE_PROPAGATION: 0.75
ELASTIC_RECHARGE_DEGRADATION: 1

# Fatigue parameters
FATIGUE_INCREMENT: 5          # Fatigue added when neuron is active
FATIGUE_DECREMENT: 1          # Fatigue recovery per step (toward 0)
FATIGUE_MAX: 100              # Maximum fatigue level
FATIGUE_SMOOTHNESS: 50        # Response curve: 0%=binary, 50%=sigmoid, 100%=linear

# Emotional Quantum (EQ)
EQ_MAX: 1000                # Maximum absolute EQ value
DEFAULT_MIN_EQ: -3          # Random initialization minimum
DEFAULT_MAX_EQ: 3           # Random initialization maximum
STAR_LEVEL: 50              # Minimum |EQ| for star classification

# Connectome generation
LINKS_PER_NEURON_MIN: 30
LINKS_PER_NEURON_MAX: 2000
LINK_LENGTH_MAX: 1000         # Was 500 - now reaches all head neurons from body

# Link length distribution bands
LINK_LEN_SHORT_RANGE: 20      # Short = 0-200 neurons
LINK_LEN_LONG_RANGE: 30       # Long = 700-1000 neurons (reaches terror zones)
LINK_DISTRIBUTION_DEFAULT: [50, 25, 25]  # More long-range to reach head

# =============================================================================
# Connectome Distribution Segments
# =============================================================================

connectome_distribution:
  # Post-head region - reaches back to ALL head zones (100-999)
  - start: 1000
    end: 1500
    distribution: [30, 30, 40]   # Heavy long-range to reach terror (100-399)

  # Body integration zone - bridges head signals to mid-body
  - start: 1500
    end: 2500
    distribution: [40, 35, 25]   # Balanced with long reach

  # Mid body - distant connectivity for integration
  - start: 2500
    end: 3500
    distribution: [30, 30, 40]   # Long-range for global integration

  # Pre-tail - connects to body and actuators
  - start: 3500
    end: 5000
    distribution: [50, 30, 20]   # Reaches back to mid-body

# History
HISTORY_MAXLEN: 256

# Timing
DAY_STEPS: 20000

# =============================================================================
# Physical Model Parameters
# =============================================================================

WORLD_SIZE: 1000            # Size of 1D world (normalized to 0-1 for display)

# Lamp Movement
LAMP_MODE: "sine"           # "sine", "linear", or "file"
LAMP_AMPLITUDE: 0.4         # Amplitude as fraction of world (0.4 = 40% swing)
LAMP_PERIOD: 4000           # Period in steps (full cycle)
LAMP_CENTER: 0.5            # Center position (normalized 0-1)
LAMP_FILE: ""               # CSV file path for "file" mode

# Agent Movement
AGENT_SPEED: 0.001          # Max movement per step (fraction of world)
AGENT_START: 0.5            # Starting position (normalized 0-1)

# =============================================================================
# Sensory Input Configuration
# =============================================================================

# Orgasm zone - reward for matching lamp position
ORGASM_TOLERANCE: 0.10      # 10% tolerance for "hit" (fraction of world)
ORGASM_MAX_EQ: 800          # Maximum positive EQ for orgasm neurons
ORGASM_MIN_EQ: 50           # Minimum positive EQ (at edge of tolerance)

# Terror zones - punishment for deviation
TERROR_MAX_EQ: -600         # Maximum negative EQ for terror neurons
TERROR_MIN_EQ: -20          # Minimum negative EQ (at start of deviation)
TERROR_RANGE: 0.5           # Range where terror is felt (fraction of world)
TERROR_SMOOTHNESS: 50       # Response curve: 0%=binary step, 50%=sigmoid, 100%=linear

# Orgasm response curve
ORGASM_SMOOTHNESS: 50       # Response curve: 0%=binary step, 50%=sigmoid, 100%=linear

# =============================================================================
# Head Neuron Layout (0-999)
# =============================================================================
# 0-99:     Reserved
# 100-399:  Terror Up (agent above lamp)
# 400-699:  Terror Down (agent below lamp)
# 700-999:  Orgasm (agent matches lamp)

HEAD_RESERVE: 100           # Reserved neurons at start
TERROR_UP_START: 100        # Terror up zone start
TERROR_UP_COUNT: 300        # Terror up neuron count
TERROR_DOWN_START: 400      # Terror down zone start
TERROR_DOWN_COUNT: 300      # Terror down neuron count
ORGASM_START: 700           # Orgasm zone start
ORGASM_COUNT: 300           # Orgasm neuron count

# =============================================================================
# Tail Actuator Layout (4000-4999)
# =============================================================================
# 4000-4399: Move Up actuator (400 neurons)
# 4500-4899: Move Down actuator (400 neurons)

ACTUATOR_UP_START: 4000
ACTUATOR_UP_COUNT: 400
ACTUATOR_DOWN_START: 4500
ACTUATOR_DOWN_COUNT: 400
ACTUATOR_EQ: 30             # Positive EQ for actuator neurons

# =============================================================================
# Visualization Parameters
# =============================================================================

NEURON_POSITIVE_COLOR: [0, 255, 0]
NEURON_NEGATIVE_COLOR: [255, 0, 0]
NEURON_BG_COLOR: [0, 0, 0]
HEAD_INACTIVE_COLOR: [14, 14, 14]

VISUALIZATION_WIDTH: 1920
VISUALIZATION_HEIGHT: 1080
CES_STRIP_WIDTH: 100
ACTUATOR_STRIP_WIDTH: 100
PHYSICAL_STRIP_WIDTH: 100

# CES Strip
CES_BG_COLOR: [14, 14, 14]
CES_ESP_COLOR: [14, 238, 14]
CES_ESN_COLOR: [235, 14, 14]
CES_GRID_COLOR: [24, 24, 24]
CES_GRID_SPACING: 25
CES_RANGE: 5000

# Physical Strip Colors
PHYSICAL_AGENT_COLOR: [0, 100, 255]
PHYSICAL_LAMP_COLOR: [255, 100, 0]

# =============================================================================
# Input Receptors (auto-configured from head layout)
# =============================================================================
# Inputs are now configured automatically based on HEAD layout above.
# The physical model provides: orgasm, terror_up, terror_down signals.

inputs:
  # Orgasm input - activates when agent matches lamp
  - signal: "orgasm"
    type: "population"
    neuron_start: 700
    neuron_count: 300
    gamma: 0.5              # Smooth response curve
    eq_gradient:
      low: 50               # Edge of tolerance
      high: 800             # Direct hit

  # Terror Up - activates when agent is above lamp
  - signal: "terror_up"
    type: "population"
    neuron_start: 100
    neuron_count: 300
    gamma: 2.0              # Logistic-like: slow start, sharp rise
    eq_gradient:
      low: -20              # Slight deviation
      high: -600            # Far deviation

  # Terror Down - activates when agent is below lamp
  - signal: "terror_down"
    type: "population"
    neuron_start: 400
    neuron_count: 300
    gamma: 2.0              # Logistic-like: slow start, sharp rise
    eq_gradient:
      low: -20              # Slight deviation
      high: -600            # Far deviation

# =============================================================================
# Output Actuators
# =============================================================================

actuators:
  - name: "move_up"
    start: 4000
    count: 400
    default_eq: 30
    color: [100, 200, 255]  # Light blue
    inputs:
      start: 2000           # Mid-body input
      count: 200
      weight: 30

  - name: "move_down"
    start: 4500
    count: 400
    default_eq: 30
    color: [255, 200, 100]  # Light orange
    inputs:
      start: 2200           # Mid-body input
      count: 200
      weight: 30

# =============================================================================
# Innate Generators (disabled for now - using direct sensory input)
# =============================================================================

innates: {}

# =============================================================================
# Named Neurons
# =============================================================================

named:
  reserve_end: 99
  terror_up_start: 100
  terror_up_end: 399
  terror_down_start: 400
  terror_down_end: 699
  orgasm_start: 700
  orgasm_end: 999
  actuator_up_start: 4000
  actuator_up_end: 4399
  actuator_down_start: 4500
  actuator_down_end: 4899

# =============================================================================
# Sauron's Finger (disabled for clean test)
# =============================================================================

saurons_finger: []

# Socio - Neuromorphic Simulation Framework

Charly neuromorphic cellular automaton simulation that tests whether a neural substrate can learn to react appropriately to a physical model of reality.

## Quick Start

```batch
run.bat 5              # Run simulation for 5 days
run.bat 10 results     # Run 10 days, output to results/
```

## Project Structure

```
socio/
├── run.bat             # Run the simulation
├── build.bat           # Rebuild sources using Claude Code
├── config/
│   └── config.yaml     # Simulation configuration
├── src/
│   ├── physical_model.py   # Abstract base class
│   ├── model_linear.py     # Linear 1D world
│   ├── charly.py           # Neural substrate
│   └── main.py             # CLI application
├── devlogs/            # Conversation exports
├── CLAUDE.md           # Claude Code guide
├── physics.md          # Physical model spec
├── neuron.md           # Neuron structure spec
├── substrate.md        # Substrate spec
├── sequence.md         # SequenceGenerator DSL
└── application.md      # CLI application spec
```

## Batch Files

### run.bat
Runs the simulation with specified parameters:
```batch
run.bat [days] [output_dir]
```
- `days`: Number of simulation days (default: 1)
- `output_dir`: Output directory (default: output)

### build.bat
Invokes Claude Code to regenerate all source files from prompt specifications:
```batch
build.bat
```
- Cleans `src/` directory
- Preserves `config/` files
- Regenerates code from `*.md` prompt files

## Development

The project uses a prompt-driven development approach:
1. Specifications are defined in `.md` prompt files
2. Source code is generated by Claude Code based on prompts
3. `build.bat` regenerates sources when prompts change

### Prompt Files
| File | Specifies |
|------|-----------|
| `physics.md` | PhysicalModel interface, Linear world, formulas |
| `neuron.md` | Neuron structure, `_process_neuron()` algorithm |
| `substrate.md` | Charly class, connectome, day/night cycles |
| `application.md` | CLI usage, execution flow |
| `sequence.md` | SequenceGenerator DSL |

## Checkpoints

### Combined the Prompts
Initial checkpoint consolidating specifications from original `main_prompt.txt` into modular prompt files.

### Source Generation
Generated implementation in `src/` based on prompt specifications.

### Population Coding & Visualization Enhancements
- **Population-coded inputs**: Eye sensor spreads luminosity across 50 neurons using Stevens' power law (psychophysical accuracy)
- **Thermometer coding**: Low luminosity activates few neurons, high luminosity activates many
- **CES waveform display**: 100px strip with dark green background, ESP (light green) and ESN (red) as waveform dots with grid
- **Inactive head neurons**: Displayed as dark grey in visualization
- **Linear lamp movement**: Lamp moves left-to-right once per day (1080 iterations)
- **Physical model visualization**: Generates `physical_*.png` showing agent/lamp positions
- **Output cleanup**: Automatically cleans output directory on restart
- **Sauron's Finger**: Dynamic substrate modification system for pressing on neurons
  - Configurable: center, radius, shape (gaussian/linear/flat/custom), pressure
  - Time-bounded: iter_start, iter_end
  - Parameters: elastic_trigger, elastic_recharge, charge, cumulative_signal
- **Slower propagation tuning**: Adjusted charge dynamics for slower activity spread
